# Family Grocery App - Steering Document

## Project Goal
Create a mobile-friendly family grocery application using Nuxt 3/4, Nuxt UI, and Supabase. The app allows family members to maintain individual recurring grocery lists and a shared shopping list.

## Tech Stack
- **Framework:** Nuxt 4
- **UI Framework:** Nuxt UI
- **Backend/Auth:** Supabase
- **Icons:** Lucide (via Nuxt UI)

## Core Features
- **Authentication:** Email/Password and Magic Link support via Supabase.
- **Shared Shopping List:** 
    - Full list view showing items from all users.
    - Grouped/Headered by user's display name.
    - Mobile-optimized layout.
- **Recurring Items:**
    - Separate tab/view for personal recurring items.
    - Add/Edit/Delete recurring items with frequency.
    - Copy recurring items to the main shopping list.
- **Shopping Logic:**
    - Mark items as "bought" (deletes from list).
    - Automatically update `last_bought` timestamp on linked recurring items when bought.
    - "Mark all as bought" functionality for bulk clearing.

## Data Schema (Proposed)
_Note: All tables have RLS policies to restrict access to users only._
### recurring_items
```sql

create table public.recurring_items (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  last_bought date null,
  name text not null,
  created_by uuid not null,
  frequency integer not null,
  frequency_type text null,
  constraint recurring_items_pkey primary key (id),
  constraint recurring_items_created_by_fkey foreign KEY (created_by) references auth.users (id) on delete CASCADE
) TABLESPACE pg_default;
```

### Shopping List Items
```sql
create table public.list_items (
  id bigint generated by default as identity not null,
  created_at timestamp with time zone not null default now(),
  recurring_item_id bigint null,
  name text not null,
  user_id uuid not null,
  quantity integer not null default 1,
  constraint list_items_pkey primary key (id),
  constraint list_items_recurring_item_id_fkey foreign KEY (recurring_item_id) references recurring_items (id),
  constraint list_items_user_id_fkey foreign KEY (user_id) references auth.users (id)
) TABLESPACE pg_default;
```
